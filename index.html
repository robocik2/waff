<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Walking Cursor with Complex Character Interaction</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            cursor: none;
            font-family: Arial, sans-serif;
        }
        #cursor, #avoidant, #heart {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
        }
        .trail {
            position: absolute;
            pointer-events: none;
        }
        .menu-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 10000;
        }
        .menu-button {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        .menu-button:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <div id="cursor"></div>
    <div id="avoidant"></div>
    <div id="heart"></div>
    <div class="menu-container">
        <button class="menu-button" onclick="navigateTo('apply.html')">Apply</button>
        <button class="menu-button" onclick="navigateTo('https://www.instagram.com')">Instagram</button>
        <button class="menu-button" onclick="navigateTo('info.html')">Info</button>
    </div>
    <script>
        const cursor = document.getElementById('cursor');
        const avoidant = document.getElementById('avoidant');
        const heart = document.getElementById('heart');

        const cursorSvg = `
        <svg width="50" height="50" viewBox="0 0 50 50">
            <style>
                @keyframes cursorAnimation { to { transform: translateX(-250px); } }
                #cursorGroup { animation: cursorAnimation 0.5s steps(5) infinite; }
            </style>
            <defs>
                <g id="cursorFrame">
                    <circle cx="25" cy="25" r="25" fill="red" />
                    <rect x="0" y="0" width="50" height="50" fill="blue" />
                    <polygon points="25,0 50,50 0,50" fill="green" />
                    <ellipse cx="25" cy="25" rx="25" ry="15" fill="purple" />
                    <path d="M25,0 L50,50 L0,50 Z" fill="orange" />
                </g>
            </defs>
            <g id="cursorGroup">
                <use href="#cursorFrame" x="0" />
                <use href="#cursorFrame" x="50" />
                <use href="#cursorFrame" x="100" />
                <use href="#cursorFrame" x="150" />
                <use href="#cursorFrame" x="200" />
            </g>
        </svg>`;

        const avoidantSvg = `
        <svg width="40" height="40" viewBox="0 0 40 40">
            <style>
                @keyframes avoidantAnimation { to { transform: translateX(-200px); } }
                #avoidantGroup { animation: avoidantAnimation 0.5s steps(5) infinite; }
            </style>
            <defs>
                <g id="avoidantFrame">
                    <circle cx="20" cy="20" r="20" fill="yellow" />
                    <rect x="0" y="0" width="40" height="40" fill="pink" />
                    <polygon points="20,0 40,40 0,40" fill="cyan" />
                    <ellipse cx="20" cy="20" rx="20" ry="10" fill="magenta" />
                    <path d="M20,0 L40,40 L0,40 Z" fill="lime" />
                </g>
            </defs>
            <g id="avoidantGroup">
                <use href="#avoidantFrame" x="0" />
                <use href="#avoidantFrame" x="40" />
                <use href="#avoidantFrame" x="80" />
                <use href="#avoidantFrame" x="120" />
                <use href="#avoidantFrame" x="160" />
            </g>
        </svg>`;

        let lastX = 0;
        let lastY = 0;
        let avoidantX = window.innerWidth / 2;
        let avoidantY = window.innerHeight / 2;
        let avoidantVx = 0;
        let avoidantVy = 0;
        let cursorX = 0;
        let cursorY = 0;
        let lastCursorMoveTime = Date.now();
        let isHeartVisible = false;

        cursor.innerHTML = cursorSvg;
        avoidant.innerHTML = avoidantSvg;

        function updateCursor(e) {
            cursorX = e.clientX;
            cursorY = e.clientY;
            lastCursorMoveTime = Date.now();

            cursor.style.left = `${cursorX - 25}px`;
            cursor.style.top = `${cursorY - 25}px`;

            if (isHeartVisible) {
                hideHeart();
            }
        }

        function updateAvoidant() {
            const dx = cursorX - avoidantX;
            const dy = cursorY - avoidantY;
            const distance = Math.sqrt(dx * dx + dy * dy);
            const timeSinceLastMove = Date.now() - lastCursorMoveTime;

            if (distance < 100) {
                // Run away
                const angle = Math.atan2(dy, dx);
                avoidantVx -= Math.cos(angle) * 2;
                avoidantVy -= Math.sin(angle) * 2;
            } else if (distance > 300 || timeSinceLastMove > 2000) {
                // Move closer
                avoidantVx += dx * 0.001;
                avoidantVy += dy * 0.001;

                if (timeSinceLastMove > 2000 && distance < 60) {
                    showHeart();
                }
            }

            // Apply friction
            avoidantVx *= 0.95;
            avoidantVy *= 0.95;

            // Update position
            avoidantX += avoidantVx;
            avoidantY += avoidantVy;

            // Keep avoidant character within screen bounds
            avoidantX = Math.max(20, Math.min(window.innerWidth - 20, avoidantX));
            avoidantY = Math.max(20, Math.min(window.innerHeight - 20, avoidantY));

            avoidant.style.left = `${avoidantX - 20}px`;
            avoidant.style.top = `${avoidantY - 20}px`;

            requestAnimationFrame(updateAvoidant);
        }

        function showHeart() {
            if (!isHeartVisible) {
                isHeartVisible = true;
                heart.innerHTML = '<svg width="40" height="40"><path d="M20,10 C14,0 0,4 0,14 C0,24 20,34 20,34 C20,34 40,24 40,14 C40,4 26,0 20,10" fill="red"/></svg>';
                heart.style.left = `${avoidantX - 20}px`;
                heart.style.top = `${avoidantY - 40}px`;
                heart.style.transform = 'scale(0)';
                heart.style.opacity = '1';
                heart.style.transition = 'transform 0.5s, opacity 0.5s';
                setTimeout(() => {
                    heart.style.transform = 'scale(1)';
                }, 50);
                setTimeout(hideHeart, 2000);
            }
        }

        function hideHeart() {
            if (isHeartVisible) {
                isHeartVisible = false;
                heart.style.transform = 'scale(2)';
                heart.style.opacity = '0';
            }
        }

        function navigateTo(url) {
            window.location.href = url;
        }

        document.addEventListener('mousemove', updateCursor);
        updateAvoidant();
    </script>
</body>
</html>
